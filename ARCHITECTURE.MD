# ğŸ“ InsightLens Architecture

InsightLens is a full-stack, serverless document analysis platform built to ingest PDFs, extract structured text using OCR, and make documents searchable by keyword â€” all using cloud-native technologies.

---

## âš™ï¸ System Overview

```
Client (React)
   |
   | /upload-url, /search, /document/{id}
   v
API (FastAPI on ECS Fargate)
   |
   â”œâ”€â”€ /upload-url        â†’ Returns presigned S3 POST URL
   â”œâ”€â”€ /keyword-search    â†’ Queries DynamoDB inverted index
   â”œâ”€â”€ /document/{id}     â†’ Returns full extracted text
   â””â”€â”€ /poll              â†’ Triggers Textract polling Lambda
   |
   v
AWS Services:
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   |                    Core Data Flow                          |
   |                                                            |
   |   [1] Upload PDF to S3 (`uploads/`)                        |
   |   [2] S3 triggers Lambda (textractOnUpload)                |
   |   [3] Starts Textract job â†’ logs to DynamoDB               |
   |   [4] EventBridge triggers autoPoller every 2 min          |
   |   [5] autoPoller polls Textract, updates extracted text    |
   |   [6] DynamoDB stream triggers searchIndexer Lambda        |
   |   [7] Keywords are saved to insightlens-search-index table |
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ§± Components

| Component | Description |
|-----------|-------------|
| **Frontend** | React + Tailwind; uploads PDFs and performs keyword search |
| **Backend API** | FastAPI app containerized with Docker, deployed via ECS Fargate |
| **S3** | Stores uploaded documents |
| **Lambda Functions** | Handle Textract start, polling, and indexing |
| **DynamoDB** | Stores document metadata and extracted text |
| **Textract** | Extracts raw text from uploaded PDFs |
| **EventBridge** | Periodically triggers polling Lambda |
| **GitHub Actions** | CI/CD pipeline: lint â†’ build â†’ push to ECR â†’ deploy to ECS |

---

## ğŸ”’ IAM & Security

- **ECS Task Role**: Grants container access to S3, DynamoDB, Textract
- **Lambda Execution Roles**: Scoped access to necessary AWS services
- **S3 CORS**: Configured to allow presigned uploads from frontend

---

## ğŸ“ˆ Scalability

- All compute is serverless (Lambda + Fargate)
- API scales horizontally with ECS
- S3, Textract, and DynamoDB scale automatically
